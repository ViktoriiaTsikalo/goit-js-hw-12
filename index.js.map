{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nexport async function getImages(query, page) {\n\n    const BASE_URL = 'https://pixabay.com/api/';\n    const params = new URLSearchParams({\n        key: '48819387-421892b97c727b1ba27e3124c',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 40,\n    });\n    const url = `${BASE_URL}?${params}`;\n    try {\n        const response = await axios.get(url); \n        return response.data;\n    }\n    catch(error) {\n            console.error('Error fetching images:', error);\n            iziToast.error({\n                message: 'Something went wrong. Please try again later.',\n                position: 'topRight',\n            });\n            throw error;\n        };\n}","export function imagesRender(obj) {\n    return `<div\n  class=\"image-container fb js-image-container\"\n  style=\"justify-content: start\"\n>\n  <div class=\"image-card card\">\n    <a class=\"photo-container\" href=\"${obj.largeImageURL\n}\">\n      <img src=\"${obj.webformatURL}\" alt=\"${obj.tags}\" class=\"photo\" />\n    </a>\n    <ul class=\"image-body\">\n      <li>\n        <h2>Likes</h2>\n        <p>${obj.likes}</p>\n      </li>\n      <li>\n        <h2>Views</h2>\n        <p>${obj.views}</p>\n      </li>\n      <li>\n        <h2>Comments</h2>\n        <p>${obj.comments}</p>\n      </li>\n      <li>\n        <h2>Downloads</h2>\n        <p>${obj.downloads}</p>\n      </li>\n    </ul>\n  </div>\n</div>`\n}","import axios from 'axios';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { getImages } from './js/pixabay-api';\nimport { imagesRender } from './js/render-functions';\n\nlet lightbox = new SimpleLightbox('.gallery a', { \n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nconst refs = {\n    formEl: document.querySelector('#search-images'),\n    galleryEl: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n    btnLoadMore: document.querySelector('#button-load')\n};\n\nconst params = {\n    query: '',\n    page: 1,\n    total: 100,\n}\n\nrefs.formEl.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    params.query = e.target.elements.query.value.trim();\n    params.page = 1;\n    refs.loader.style.display = 'block';\n    refs.galleryEl.innerHTML = ''; \n    try {\n        const images = await getImages(params.query, params.page);\n        if (images.hits.length === 0) {\n            hideLoadButton()\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            });\n            return null;\n        } else {\n        const allImages = images.hits;\n        const markup = allImages.map(imagesRender).join('');\n        refs.galleryEl.insertAdjacentHTML('beforeend', markup);\n        lightbox.refresh();\n            params.total = images.totalHits;\n    }\n        } catch (error) {console.error('Error fetching images:', error);\n                iziToast.error({\n                    message: 'Something went wrong. Please try again later.',\n                    position: 'topRight',\n                })\n        } finally{\n            refs.loader.style.display = 'none';\n        };\ncheckBtnStatus();\n    e.target.reset();\n});\n\nrefs.btnLoadMore.addEventListener('click', async (e) => {\n    params.page += 1;\n    refs.loader.style.display = 'block';\n         try {\n        const images = await getImages(params.query, params.page);\n             if (images.hits.length === 0) {\n            \n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            });\n            return null;\n        } else {\n        const allImages = images.hits;\n        const markup = allImages.map(imagesRender).join('');\n        refs.galleryEl.insertAdjacentHTML('beforeend', markup);\n        lightbox.refresh();\n            params.total = images.totalHits;\n    }\n        } catch (error) {console.error('Error fetching images:', error);\n                iziToast.error({\n                    message: 'Something went wrong. Please try again later.',\n                    position: 'topRight',\n                })\n        } finally{\n            refs.loader.style.display = 'none';\n        };\n    checkBtnStatus();\n    scrollPage();\n})\n\nfunction showLoadButton() {\n    refs.btnLoadMore.classList.remove('hidden');\n}\n\nfunction hideLoadButton() {\n    refs.btnLoadMore.classList.add('hidden');\n}\n\nfunction checkBtnStatus() {\n    const perPage = 40;\n    const maxPage = Math.ceil(params.total / perPage);\n    if (params.page >= maxPage) {\n        hideLoadButton();\n        iziToast.info({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight',\n        })\n    } else {\n        showLoadButton();\n   }\n}\n\nfunction scrollPage() {\n    const picture = refs.galleryEl.firstElementChild.getBoundingClientRect();\n    const height = picture.height * 2 + 48;\n    scrollBy({\n        top: height,\n        behavior: 'smooth',\n    })\n}"],"names":["getImages","query","page","BASE_URL","params","url","axios","error","iziToast","imagesRender","obj","lightbox","SimpleLightbox","refs","e","images","hideLoadButton","markup","checkBtnStatus","scrollPage","showLoadButton","maxPage","height"],"mappings":"owBAIO,eAAeA,EAAUC,EAAOC,EAAM,CAEzC,MAAMC,EAAW,2BACXC,EAAS,IAAI,gBAAgB,CAC/B,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EAClB,CAAK,EACKG,EAAM,GAAGF,CAAQ,IAAIC,CAAM,GACjC,GAAI,CAEA,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,IACnB,OACKE,EAAO,CACL,cAAQ,MAAM,yBAA0BA,CAAK,EAC7CC,EAAS,MAAM,CACX,QAAS,gDACT,SAAU,UAC1B,CAAa,EACKD,CAElB,CAAA,CC7BO,SAASE,EAAaC,EAAK,CAC9B,MAAO;AAAA;AAAA;AAAA;AAAA;AAAA,uCAK4BA,EAAI,aAC3C;AAAA,kBACkBA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,aAKvCA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,aAITA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,aAITA,EAAI,QAAQ;AAAA;AAAA;AAAA;AAAA,aAIZA,EAAI,SAAS;AAAA;AAAA;AAAA;AAAA,OAK1B,CCrBA,IAAIC,EAAW,IAAIC,EAAe,aAAc,CAC5C,aAAc,MACd,aAAc,GAClB,CAAC,EAED,MAAMC,EAAO,CACT,OAAQ,SAAS,cAAc,gBAAgB,EAC/C,UAAW,SAAS,cAAc,UAAU,EAC5C,OAAQ,SAAS,cAAc,SAAS,EACxC,YAAa,SAAS,cAAc,cAAc,CACtD,EAEMT,EAAS,CACX,MAAO,GACP,KAAM,EACN,MAAO,GACX,EAEAS,EAAK,OAAO,iBAAiB,SAAU,MAAOC,GAAM,CAChDA,EAAE,eAAc,EAChBV,EAAO,MAAQU,EAAE,OAAO,SAAS,MAAM,MAAM,OAC7CV,EAAO,KAAO,EACdS,EAAK,OAAO,MAAM,QAAU,QAC5BA,EAAK,UAAU,UAAY,GAC3B,GAAI,CACA,MAAME,EAAS,MAAMf,EAAUI,EAAO,MAAOA,EAAO,IAAI,EACxD,GAAIW,EAAO,KAAK,SAAW,EACvB,OAAAC,EAAgB,EAChBR,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,UAC1B,CAAa,EACM,KACJ,CAEP,MAAMS,EADYF,EAAO,KACA,IAAIN,CAAY,EAAE,KAAK,EAAE,EAClDI,EAAK,UAAU,mBAAmB,YAAaI,CAAM,EACrDN,EAAS,QAAO,EACZP,EAAO,MAAQW,EAAO,SAC7B,CACL,OAAiBR,EAAO,CAAC,QAAQ,MAAM,yBAA0BA,CAAK,EACtDC,EAAS,MAAM,CACX,QAAS,gDACT,SAAU,UAC9B,CAAiB,CACjB,QAAiB,CACLK,EAAK,OAAO,MAAM,QAAU,MAExC,CAAAK,IACIJ,EAAE,OAAO,OACb,CAAC,EAEDD,EAAK,YAAY,iBAAiB,QAAS,MAAOC,GAAM,CACpDV,EAAO,MAAQ,EACfS,EAAK,OAAO,MAAM,QAAU,QACvB,GAAI,CACL,MAAME,EAAS,MAAMf,EAAUI,EAAO,MAAOA,EAAO,IAAI,EACnD,GAAIW,EAAO,KAAK,SAAW,EAE5B,OAAAP,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,UAC1B,CAAa,EACM,KACJ,CAEP,MAAMS,EADYF,EAAO,KACA,IAAIN,CAAY,EAAE,KAAK,EAAE,EAClDI,EAAK,UAAU,mBAAmB,YAAaI,CAAM,EACrDN,EAAS,QAAO,EACZP,EAAO,MAAQW,EAAO,SAC7B,CACL,OAAiBR,EAAO,CAAC,QAAQ,MAAM,yBAA0BA,CAAK,EACtDC,EAAS,MAAM,CACX,QAAS,gDACT,SAAU,UAC9B,CAAiB,CACjB,QAAiB,CACLK,EAAK,OAAO,MAAM,QAAU,MAExC,CAAIK,EAAc,EACdC,GACJ,CAAC,EAED,SAASC,GAAiB,CACtBP,EAAK,YAAY,UAAU,OAAO,QAAQ,CAC9C,CAEA,SAASG,GAAiB,CACtBH,EAAK,YAAY,UAAU,IAAI,QAAQ,CAC3C,CAEA,SAASK,GAAiB,CAEtB,MAAMG,EAAU,KAAK,KAAKjB,EAAO,MAAQ,EAAO,EAC5CA,EAAO,MAAQiB,GACfL,IACAR,EAAS,KAAK,CACV,QAAS,6DACT,SAAU,UACtB,CAAS,GAEDY,GAER,CAEA,SAASD,GAAa,CAElB,MAAMG,EADUT,EAAK,UAAU,kBAAkB,sBAAqB,EAC/C,OAAS,EAAI,GACpC,SAAS,CACL,IAAKS,EACL,SAAU,QAClB,CAAK,CACL"}